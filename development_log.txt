# Development Log

##### 2026-02-11 (1일차) #####

## 데이터 클렌징 완료
- 작업 결과:
    - data_cleaned/cleaned_synthesis_data.csv (237 rows, 22 columns) 생성 완료
    - data_cleaned/cleaned_coating_data.csv (1945 rows, 21 columns) 생성 완료

## 기초 통계 분석 완료
- 상관관계 분석 수행 및 유의미한 수치 확인

## AI 모델 학습 완료 (RandomForest)
- 모델 구축: Scikit-Learn의 RandomForestRegressor 활용
- 학습 결과: 점도(R2 0.83), Tg(R2 0.76) 확보

## 고분자 물성 예측 AI 모델 설계 및 시뮬레이터 구현
- 결과: inference.py 및 app.py 구축 완료

## 개발 환경 설정 및 의존성 설치 문제 해결
- 조치: .venv 내 requirements.txt 패키지 설치 완료

## 최종 결과물 버전 관리 및 배포
- Git 작업: .gitignore 설정 및 전체 소스 코드 커밋 완료
- 원격 배포: GitHub 원격 저장소(origin)로 최종 코드 푸시 완료
- 클라우드 배포: Streamlit Cloud 배포 완료 (https://sg-proj-001.streamlit.app/)
- 이슈 수정 1: Altair 버전 호환성 오류 해결 (streamlit 버전 핀 조정)
- 이슈 수정 2: UnicodeDecodeError 해결 (모든 텍스트 입출력을 utf-8-sig로 동기화)
- UI 보완: 입력 필드별 단위 명시 및 사용자 가이드 안내 추가
- UX 개선: 실제 레시피 기반 예시 데이터 적용 및 실시간 합계 표시 위치 최적화(상단)
- 로그: 1일차 모든 개발 과정 및 서버 배포/안정화 최종 완료

##### 2026-02-12 (2일차) #####

## 코드 아키텍처 고도화 완료
- 경로 동적화: 모든 Python 스크립트에서 하드코딩된 절대 경로를 삭제하고 실행 위치 기반 상대 경로(os.path.abspath)로 교체하여 시스템 이식성 확보
- 파싱 로직 견고화: 기호와 공백이 섞인 복잡한 모노머/첨가제 텍스트 정보를 안정적으로 수치화하는 정규표현식 기반 파서 구현 (prepare_dataset.py, prepare_coating_dataset.py)
- 교차 검증 도입: 단순 평가 방식의 맹점을 보완하기 위해 K-Fold Cross-Validation(K=5) 도입. Tg 예측 모델 결과 CV R2 0.85의 신뢰성 검증 완료 (train_models_rf.py)

## 도포 데이터 분석 및 모델링 완료
- 데이터셋 구축: 1945건의 도포 데이터를 정제하여 1879건의 학습용 데이터셋 생성 (coating_model_features.csv)
- 성능 확보: 예측 타겟인 '점착력'에 대해 Test R2 0.74, MAE 47.33 gf/25mm 달성. 경화제 및 기재 종류에 따른 성능 변화 예측 가능

## 멀티 탭 UI 시뮬레이터 리팩토링
- 탭 구조 도입: Streamlit 앱을 '합성 시뮬레이터'와 '도포 시뮬레이터' 탭으로 이원화하여 사용자 경험 고도화
- 도포 시뮬레이터 구현: 기재 선택, 경화제/첨가제 함량 입력 기능을 포함한 독자적인 인터페이스 구축 완료
- 통합 배포: 신규 버전 소스 코드를 GitHub에 업로드하여 Streamlit Cloud에 즉시 반영

## 프로젝트 유지보수성 강화 (Cleanup)
- 디렉토리 구조 재설계: scripts/ (스크립트), reports/ (리포트) 폴더 생성 및 파일 분리 이관 완료
- 경로 로직 최적화: 이관된 모든 파일에 상위 디렉토리 참조(..) 로직을 적용하여 실행 안정성 확보
- 불필요 파일 제거: 레거시 코드 및 임시 파일을 정리하여 루트 디렉토리 간소화 달성

## 화학적 지식 기반 역설계 시스템 고도화 (Final)
- 화학적 피처 엔지니어링: 모노머 물성 DB(MW, Tg, Polarity) 구축 및 전처리 파이프라인 통합
- 역설계 최적화 엔진: 목표 물성 기반 최적 배합비 산출 알고리즘(Scipy SLSQP) 구현
- 통합 UI 완성: '역설계 시뮬레이터' 탭 신설 및 합성/도포 시뮬레이션과의 시너지 확보
- 데이터 신뢰성: K-Fold 교차 검증 및 모든 파이프라인 상대 경로 동적화 완료

## 데이터 무결성 및 파이프라인 신뢰성 고도화 (Complete)
- 화학 물질명 파싱 수정: 2-EHA, 4-HBA 등 하이픈/특수문자 포함 화학명 인식 오류 해결 (정규표현식 고도화)
- 경로 독립성 확보: 모든 전처리/학습 스크립트(clean_data, prepare_dataset, train_models_rf) 하드코딩 경로 제거 및 상대 경로 적용
- 모델 검증 강화: K-Fold 교차 검증 도입을 통해 Tg 모델 CV R2 0.92 확보 및 전체 학습 리포트(training_metrics.txt) 자동 생성 체계 구축

## 시스템 의존성 및 시각화 안정화 (Complete)
- 라이브러리 설치: 역설계 결과 시각화에 필요한 plotly 라이브러리 설치 및 의존성 환경(requirements.txt) 동기화 완료
- 실행 오류 해결: 모듈 로드 오류(ModuleNotFoundError) 발생 지점을 수정하여 역설계 차트 및 테이블이 정상 출력되도록 조치함

## 역설계-합성 시뮬레이터 탭 간 데이터 연동 (Complete)
- 기능 구현: 'Inverse Design' 탭의 최적 배합비를 'Synthesis Simulator' 탭으로 즉시 전송하는 세션 상태 동기화 로직 구축
- UI 개선: 역설계 결과 하단에 '전송' 버튼 추가 및 전송 시 알림/리런(Rerun) 처리 완료
- 워크플로우 완성: 산출된 레시피를 수동으로 옮길 필요 없이 클릭 한 번으로 상세 예측 검증이 가능한 파이프라인 완성

## 위젯 상태 관리 및 경고 해결 (Complete)
- 경고 제거: st.number_input 위젯의 key와 value 중복 설정으로 인한 경고 메시지 해결
- 상태 최적화: 앱 시작 시 세션 상태 초기화 로직을 강화하고, 위젯 정의 시 전용 key를 통한 단일 상태 관리 체계 구축
- 사용자 피드백 반영: 로컬 테스트 위주의 작업 진행을 위해 불필요한 Git 커밋 최소화 조치 완료

##### 2026-02-15 (3일차) #####

## UI/UX 고도화 및 가독성 개선
- 공정 조건 그룹화: 합성 시뮬레이터의 온도, 시간 등 공정 변수를 '공정 조건 설정' 확장 패널(Expander)로 묶어 화면 복잡도 감소
- 그리드 레이아웃 적용: 2단 컬럼 구성을 통해 수십 개의 입력 필드를 효율적으로 배치하고 스크롤 압박 해결
- 모노머 범주화: 화학적 특성에 따라 모노머를 'Soft', 'Hard', 'Functional' 그룹으로 자동 분류하여 사용자 입력 편의성 증대

## 데이터 품질 및 모델 재학습 (Retraining)
- 데이터 아티팩트 필터링: 모노머 명칭 파싱 중 발생하는 수치 오류(예: '1') 및 첨가제(NDM 등) 오구분 로직 수정
- 모델 성능 유지: 정제된 데이터를 기반으로 Tg 모델 CV R2 0.92, 점도 모델 R2 0.75 수준의 예측 신뢰성 재검증 및 갱신

## 역설계 시뮬레이터 로직 개선 및 롤백 (Algorithm Refinement)
- 제약 조건 엔진 시험: 성분 수 제한(Sparsity Penalty), 필수/제외 성분 필터링 등 복잡한 최적화 알고리즘 시범 적용
- 안정성 기반 롤백 결정: 확장된 검색 범위에서의 결과 변동성 및 현실성 이슈로 인해, 알고리즘을 다시 안정적인 4대 핵심 모노머 기반 최적화 로직으로 복구 (단, 구현된 UI 레이아웃은 유지)

## 탭 간 데이터 동기화 무결성 확보 (Complete)
- 초기화 버그 수정: 역설계 결과 전송 시 기존 기본값과 중복 합산되던 오류를 배합비 리셋 로직(Clear and Apply)을 통해 해결
- 공정 조건 동기화: 배합비뿐만 아니라 최적화 시 설정했던 온도, 시간, 고형분 정보까지 합성 탭으로 동기화하여 자동 연동 완성

## 시스템 이식성 및 유지보수성 강화
- 절대 경로 제거: 프로젝트 내 모든 파일 경로를 dynamic relative path (os.path.abspath)로 통일하여 타 환경에서의 실행 안정성 확보
- 코드 클린업: 레거시 코드 정리 및 README.md 최신화 완료 (Git Commit & Push 최종 완료)
